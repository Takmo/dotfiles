---
# common setup for all profiles

- name: clone dotfiles repo
  become_user: "{{username}}"
  git:
    repo: https://github.com/Takmo/dotfiles.git
    dest: "/home/{{username}}/dotfiles"

- name: create dotfiles
  become_user: "{{username}}"
  copy:
    force: false
    dest: "/home/{{username}}/{{item}}"
    src: "{{item}}"
  with_items:
    - ".config"
    - ".tmux.conf"
    - ".vimrc"
    - ".zshrc"

- name: install node version manager
  shell: >
    curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | zsh
  args:
    creates: "/home/{{username}}/.nvm/nvm.sh"
